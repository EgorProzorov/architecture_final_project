# Visit Service

Этот проект представляет собой микросервис, который отслеживает количество посещений с использованием Flask, Redis и RabbitMQ.

## Требования

Перед запуском убедитесь, что у вас установлены следующие инструменты:
- Python 3.8+
- Docker и Docker Compose

## Установка и запуск

1. **Клонируйте репозиторий**:
   ```bash
   git clone https://github.com/EgorProzorov/architecture_final_project
   cd final_project
   ```

2. **Запустите сервисы с помощью Docker Compose**:
   ```bash
   docker-compose up --build
   ```

3. **Проверьте, что сервисы работают**:
   - FastAPI-приложение будет доступно на порту `5001`.
   - Redis и RabbitMQ будут запущены в контейнерах.

4. **Отправьте GET-запрос к сервису**:
   Используйте `curl` или Postman для проверки работы сервиса:
   ```bash
   curl -X GET http://localhost:5001/visit
   ```

   В ответ вы получите JSON с количеством посещений:
   ```json
   {"visit_count": 1}
   ```

---

## Как посмотреть базу данных Redis

1. Найдите ID контейнера Redis:
   ```bash
   docker ps
   ```
   Найдите контейнер с именем, содержащим `redis`.

2. Подключитесь к Redis CLI:
   ```bash
   docker exec -it <redis_container_id> redis-cli
   ```

3. Выполните команды для просмотра данных:
   - Список всех ключей:
     ```bash
     KEYS *
     ```
   - Получить значение ключа `visits`:
     ```bash
     GET visits
     ```

---

## Как посмотреть очередь RabbitMQ

1. Перейдите в веб интерфейс
   ```
   http://localhost:15672
    ```

2. Войдите в веб-интерфейс:
   - Логин: `guest`
   - Пароль: `guest`

3. Перейдите на вкладку **Queues**:
   - Найдите очередь с именем `notification`.
   - Вы можете просмотреть сообщения в очереди или отправить новые.

---

## Примечания

- Если вы хотите остановить все контейнеры, выполните:
  ```bash
  docker-compose down
  ```
- Убедитесь, что порты `5001`, `6379` и `15672` не заняты другими процессами.